(function(e){function t(t){for(var n,o,s=t[0],l=t[1],c=t[2],d=0,h=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&h.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(h.length)h.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,s=1;s<a.length;s++){var l=a[s];0!==r[l]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},i=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},2777:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Combat")],1)},i=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"combat"},[a("div",{staticClass:"debug"},[a("div",[a("h3",[e._v("Create player")]),a("br"),e._v(" Name: "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.playerName,expression:"playerName"}],attrs:{type:"text",name:"player-name"},domProps:{value:e.playerName},on:{input:function(t){t.target.composing||(e.playerName=t.target.value)}}}),a("br"),e._v(" Level: "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.playerLevel,expression:"playerLevel"}],attrs:{type:"number",name:"player-level"},domProps:{value:e.playerLevel},on:{input:function(t){t.target.composing||(e.playerLevel=t.target.value)}}}),a("br"),a("input",{attrs:{type:"button",value:"Create player"},on:{click:e.newPlayer}})]),a("div",[a("h3",[e._v("Create mob")]),e._v(" Level: "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.mobLevel,expression:"mobLevel"}],attrs:{type:"number",name:"mob-count"},domProps:{value:e.mobLevel},on:{input:function(t){t.target.composing||(e.mobLevel=t.target.value)}}}),a("br"),a("input",{attrs:{type:"button",value:"Create mob"},on:{click:e.newMob}})]),a("div",[a("h3",[e._v("Statistics")]),e._v(" "+e._s((1e3/e.performance.dt).toFixed(0))+" FPS ")])]),a("section",[e.playerOne?a("Character",{attrs:{characterData:e.playerOne,player:!0},on:{skill:e.useSkill}}):e._e()],1),a("section",e._l(e.mobs,(function(t){return a("Character",{key:t.id,attrs:{characterData:t},on:{target:e.setTarget}})})),1)])},s=[],l=(a("4de4"),a("4160"),a("159b"),a("d4ec")),c=a("262e"),u=a("2caf"),d=(a("b0c0"),a("53ca")),h=a("bee2"),f=(a("a4d3"),a("e01a"),function(){function e(t){if(Object(l["a"])(this,e),"string"!==typeof t.id)return console.log("[skill contructor] invalid id: "+t.id+" Please provide a valid string"),!1;this.id=t.id,this.name=t.name||"Unnamed skill",this.description=t.description||"Skill description",this.cost=t.cost||10,this.cooldown=t.cooldown||50,this.targetMode=t.targetMode||"target",this.currentCooldown=0}return Object(h["a"])(e,[{key:"update",value:function(e){this.currentCooldown-=e,this.currentCooldown<0&&(this.currentCooldown=0)}},{key:"skillAction",value:function(e,t){return t}},{key:"use",value:function(e,t){return"object"!==Object(d["a"])(e)?(console.log("invalid target: "+e),!1):this.onCooldown?(console.log("Skill "+this.name+" is on cooldown"),!1):(this.skillAction(e,t),this.currentCooldown=this.cooldown,!0)}},{key:"onCooldown",get:function(){return this.currentCooldown>0}}]),e}()),v=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.call(this,{id:"skill-basic-attack",name:"Basic attack",description:"A basic attack, nothing special",cost:30}),e.basePower=10,e}return Object(h["a"])(a,[{key:"skillAction",value:function(e,t){e.handleHit({power:this.basePower*t.derivedStats.level})}}]),a}(f),p=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){return Object(l["a"])(this,a),t.call(this,{id:"skill-dodge",name:"Dodge",description:"Brief damage immunity",cost:20,targetMode:"self"})}return Object(h["a"])(a,[{key:"skillAction",value:function(e){e.addStatusEffect({name:"Dodge",description:"Brief damage immunity",duration:1e3,effect:{stat:"dodge",value:100,type:"set"}})}}]),a}(f),m=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.call(this,{id:"skill-heal",name:"Heal",description:"Heal a small amount of HP",cost:50,targetMode:"self"}),e.healAmount=30,e}return Object(h["a"])(a,[{key:"skillAction",value:function(e){e.handleHeal(this.healAmount)}}]),a}(f),b=a("ec26"),g=function(){function e(t,a){Object(l["a"])(this,e),this.id=Object(b["a"])(),this.level=a,this.name=t,this.skills=[],this.statusEffects=[],this.skills.push(new v),this.skills.push(new p),this.skills.push(new m),this.energy=0,this.energyRegenModifier=.01,this.health=this.derivedStats.maxHealth}return Object(h["a"])(e,[{key:"handleHit",value:function(e){this.derivedStats.dodge/100>Math.random()?console.log("dodged attack"):this.health-=e.power}},{key:"handleHeal",value:function(e){this.health+=e,this.health>this.derivedStats.maxHealth&&(this.health=this.derivedStats.maxHealth)}},{key:"addStatusEffect",value:function(e){var t=this.statusEffects.filter((function(t){return e.name===t.name}));t.length>0?(console.log("effect already exists, refresh duration"),t=e):(this.statusEffects.push(e),console.log("added status effect",this.statusEffects))}},{key:"energyRegen",value:function(e){this.energy+=e*this.energyRegenModifier,this.energy>this.derivedStats.maxEnergy&&(this.energy=this.derivedStats.maxEnergy)}},{key:"getDerivedStat",value:function(e){var t=0;return this.statusEffects.forEach((function(a){if(a.effect.stat===e)switch(a.effect.type){case"set":t=a.effect.value;break;default:break}})),t}},{key:"statusEffectUpdate",value:function(e){var t=this;this.statusEffects.forEach((function(a){a.duration-=1*e,a.duration<=0&&(t.statusEffects=t.statusEffects.filter((function(e){return e!==a})))}))}},{key:"ai",value:function(){}},{key:"update",value:function(e){this.energyRegen(e),this.statusEffectUpdate(e),this.ai(),this.skills.forEach((function(t){t.update(e)}))}},{key:"useSkill",value:function(e,t){var a=this.skills.filter((function(t){return t.id===e}))[0];return"object"!==Object(d["a"])(a)?(console.log("no skill with id "+e+" found"),!1):("self"===a.targetMode&&(t=this),"object"!==Object(d["a"])(t)?(console.log("invalid target: "+t),!1):this.energy<a.cost?(console.log("Not enough energy to use skill: "+a.name),!1):a.use(t,this)?(this.energy-=a.cost,!0):void 0)}},{key:"derivedStats",get:function(){return{level:this.level,maxEnergy:10*this.level+90,maxHealth:100*this.level,dodge:this.getDerivedStat("dodge")}}}]),e}(),y=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(e,n){return Object(l["a"])(this,a),t.call(this,e,n)}return a}(g),k=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(e,n,r){var i;return Object(l["a"])(this,a),i=t.call(this,e,n),i.target=r,i}return Object(h["a"])(a,[{key:"ai",value:function(){if("undefined"===typeof this.target)return!1;this.energy>=this.skills[0].cost&&this.useSkill("skill-basic-attack",this.target)}}]),a}(g),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"character",class:{targeted:e.characterData.targeted},on:{click:e.target}},[a("h1",[e._v(e._s(e.characterData.name))]),a("ul",[a("li",[e._v("Level: "+e._s(e.characterData.level))]),a("li",[e._v("Energy: "+e._s(e.characterData.energy.toFixed(0))+" / "+e._s(e.characterData.derivedStats.maxEnergy))]),a("li",[e._v("Health: "+e._s(e.characterData.health)+" / "+e._s(e.characterData.derivedStats.maxHealth))]),a("li",[e._v("Targeted: "+e._s(e.characterData.targeted))]),a("li",[e._v(e._s(e.characterData.derivedStats))])]),a("h3",[e._v("Skills")]),a("ul",{staticClass:"skills"},e._l(e.characterData.skills,(function(t){return a("li",{key:t.id},[a("button",{attrs:{disabled:t.onCooldown||e.characterData.energy<t.cost,type:"button"},on:{click:function(a){return e.useSkill(t.id)}}},[e._v(" "+e._s(t.name)),a("br"),e._v(" "+e._s(t.description)),a("br"),e._v(" cost: "+e._s(t.cost)),a("br"),e._v(" cooldown: "+e._s(t.currentCooldown)),a("br"),e._v(" onCooldown: "+e._s(t.onCooldown)),a("br")])])})),0),a("h3",[e._v("Status effects")]),a("ul",e._l(e.characterData.statusEffects,(function(t){return a("li",{key:t.name},[e._v(" "+e._s(t.name)),a("br"),e._v(" "+e._s(t.description)),a("br"),e._v(" "+e._s(t.duration)+" ")])})),0)])},_=[],O={components:{},props:{characterData:Object,player:Boolean},methods:{useSkill:function(e){this.$emit("skill",e)},target:function(){this.$emit("target",this)}},mounted:function(){var e=this;this.player&&window.addEventListener("keyup",(function(t){switch(t.key){case"1":e.useSkill(e.characterData.skills[0].id);break;case"2":e.useSkill(e.characterData.skills[1].id);break;case"3":e.useSkill(e.characterData.skills[2].id);break;default:break}}))}},j=O,S=(a("8875"),a("2877")),E=Object(S["a"])(j,w,_,!1,null,"4c69bf1f",null),D=E.exports,C={components:{Character:D},data:function(){return{playerName:"",mobLevel:1,playerLevel:1,playerOne:void 0,mob:void 0,mobs:[],target:void 0,performance:{dt:0,last:0}}},methods:{newPlayer:function(){var e=this;this.playerOne=new y(this.playerName,this.playerLevel),this.mobs.forEach((function(t){t.target=e.playerOne}))},newMob:function(){this.mobs.push(new k("mob",this.mobLevel,this.playerOne))},setTarget:function(e){var t=this;this.mobs.forEach((function(a){a===e.characterData?(a.targeted=!a.targeted,a.targeted&&(t.target=a)):a.targeted=!1}))},playerDeath:function(){console.log("Game over, create a new player to try again"),this.mobs=[],this.playerOne=void 0,this.mobs.forEach((function(e){e.target=void 0}))},mobDeath:function(e){console.log("dead mob",e),this.mobs=this.mobs.filter((function(e){return e.health>0}))},useSkill:function(e){this.playerOne.useSkill(e,this.target)},update:function(e){var t=this;"undefined"!==typeof this.playerOne&&(this.playerOne.update(e),this.playerOne.health<=0&&this.playerDeath()),this.mobs.forEach((function(a){a.update(e),a.health<=0&&t.mobDeath(a)}))},mainLoop:function(){window.requestAnimationFrame(this.mainLoop);var e=performance.now();this.performance.dt=e-this.performance.last,this.update(this.performance.dt),this.performance.last=e}},mounted:function(){this.mainLoop()}},x=C,L=(a("85fc"),Object(S["a"])(x,o,s,!1,null,"3d0d2ae3",null)),P=L.exports,M={name:"App",components:{Combat:P}},N=M,A=(a("5c0b"),Object(S["a"])(N,r,i,!1,null,null,null)),H=A.exports,F=a("9483");Object(F["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(H)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var n=a("9c0c"),r=a.n(n);r.a},"85fc":function(e,t,a){"use strict";var n=a("2777"),r=a.n(n);r.a},8875:function(e,t,a){"use strict";var n=a("c1d0"),r=a.n(n);r.a},"9c0c":function(e,t,a){},c1d0:function(e,t,a){}});
//# sourceMappingURL=app.27aaeae9.js.map